# DNS解析过程

- 用户输入网址
- 操作系统检查本地的host文件中有无对应的映射，如果有直接解析。
- 如果没有操作系统检查本地DNS解析缓存，如果有解析。
- 如果没有向本地DNS服务器发送DNS解析请求。
- 本地DNS服务器检查是否有缓存，如果有直接返回
- 如果没有本地DNS服务器迭代的向根域名服务器，顶级域名服务器和权威域名服务器查询。
- 查询到以后本地DNS服务器缓存该映射结果，并返回

1. 浏览器向本地DNS服务器查询是递归
2. 本地DNS服务器向根，顶级，权威查询是迭代。

## udp 与 tcp

在一个区域的多个dns服务器中，有一个主服务器和很多个从服务器。  
主服务从自己的硬盘中读取相关的数据，而从服务器需要定时向主服务器查询数据是否有变动，这个过程使用了tcp。  
主机查询dns的过程都是用的udp。