# tcp粘包

tcp粘包是指tcp发送时如果发送的数据没有到MSS（tcp报文最大长度），就会进入缓冲区，等待多个消息一起组装发送。  
导致一个tcp报文中可能会出现多个数据段，并且这些数据段中没有明确的界限分割。

同理tcp拆包就是当一个数据段超过MSS时，会被拆成多个tcp报文发送。

实际上tcp原始不存在粘包问题，在一个数据包产生后，会立刻发送，但这样发送较小的数据时，会产生大量的头部报文造成的空间浪费。  
所以Nagle算法提出并广泛应用，即设立一个缓冲区，数据会暂存在缓冲区中，在容量达到MSS后进行发送。

## 解决方法

- 设立固定报文长度，不足补零
- 在数据部分设置头部分和数据部分，指示数据包的起始和终止。