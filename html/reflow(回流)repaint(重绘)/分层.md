# 浏览器分层与合成

除了重排和重绘以外，浏览器还有分层和合成机制，对于要做变换的元素(transform, opacity)，浏览器会将其单独分为一层。  
在层级元素发生改变时，不会引起重排和重绘，只会将上层和下层进行一次合成，而且这次合成操作会在合成线程上进行操作，不会堵塞主线程。整个过程会由gpu完成。

## 优化方案

设置will-change属性将元素放置在单独的一层中，利用浏览器的分层和合成机制。但这也会占用额外的内存。

```
will-change: transform, opacity;
```

## 会触发分层的属性

- 拥有层叠上下文属性的元素会被单独提为一层(即有会造成层叠效果的)
  - position:fixed
  - z-index
  - opacity
- 当文字在块内装不下的时候，会给文字单独提一个层级