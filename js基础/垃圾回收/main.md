内存的生命周期包含三个部分

- 分配内存。
- 使用内存（读写）。
- 不需要时释放内存。

传统的垃圾回收机制
## 引用计数机制

### 引用
一个对象如果有访问另一个对象的权限，叫做一个对象引用另一个对象。
- 隐式引用：对另一个对象原型的引用
- 显示引用：对另一个对象属性的引用

机制：如果有一个对象有另一个对象引用，则不会被回收，否则会被回收

限制：循环引用
```
function f(){
    var o = {};
    var o2 = {};
    o.a = o2; // o 引用 o2
    o2.a = o; // o2 引用 o
    return "azerty";
}
f();
```
在上述例子中即使o和o2无法被访问到，由于他们循环引用，导致垃圾清理机制不会被清理。


现在的垃圾清理机制
## 标记-清除机制。

如果一个对象可以被访问到，则不会被清除。具体而言是从根对象开始，找到其引用的对象并做上标记，未被标记到的对象即无法被访问到的。

根是一组固有可达值，因为某些原因无法删除，包括
- 本地函数的局部变量和参数
- 当前嵌套调用链上的其他函数和参数
- 全局变量

算法流程
- 垃圾回收器标记根
- 垃圾回收器寻找来自根的引用并标记，不停重复这个过程直到所有可达对象被标记
- 删除未被标记的对象。